<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson-14</title>
</head>
<body>
    <h1>Redux, Redux toolkit</h1>
    <h2>createSlice, configureStore</h2>
    <p>Redux Toolkit використовує підхід до розділення стану за допомогою "slices". Створення slice - це спосіб групувати пов'язані дії та редюсери разом. 
    </p>
    <p>Redux Toolkit також надає функцію configureStore, яка автоматично виконує багато стандартних операцій настроювання.</p>
    <h2>Provider</h2>
    <p>Після створення store ви можете підключити його до свого додатку.</p>
    <h2>useDispatch()</h2>
    <p>Метод useDispatch() в React Redux Toolkit - це спеціальна функція-хук, яка надає можливість виконувати диспетчеризацію (dispatch) дій (actions)
        у вашому компоненті React, коли ви використовуєте Redux Toolkit для керування станом вашого додатка.
    </p>
    <p>В Redux Toolkit диспетчеризація дій відбувається за допомогою Redux store, який зберігає стан додатка. Для виконання диспетчеризації дій
        потрібно мати доступ до об'єкта store або мати можливість отримати доступ до нього.
    </p>
    <p>Завдяки useDispatch(), вам не потрібно прямо отримувати доступ до store в компоненті. Замість цього ви можете використовувати
        useDispatch() для отримання функції диспетчеризації дій, яку ви можете використовувати для виклику дій Redux.
    </p>
    <p>У цьому прикладі useDispatch() використовується для отримання
        функції диспетчеризації дій, яка прив'язана до об'єкта store. У нашому
        компоненті ми визначаємо функцію handleClick(), яка викликає
        диспетчеризацію дії myAction() за допомогою
        dispatch(myAction()). При кліку на кнопку "Dispatch Action" буде
        виконано диспетчеризацію дії myAction().
    </p>
    <p>Отримання доступу до функції диспетчеризації дій за допомогою
        useDispatch() дозволяє зручно і просто керувати станом вашого
        додатка в компонентах React, які використовують Redux Toolkit.
    </p>
    <h2>useSelector()</h2>
    <p>Для того, щоб отримати дані зі стору Redux та використовувати їх у компонентах, ви можете використовувати хук useSelector() з бібліотекою
        react-redux.
    </p>
    <p>У функції useSelector ви передаєте колбек-функцію, яка
        отримує поточний стан стору як аргумент і повертає потрібні
        дані. В прикладі вище ми отримуємо дані з ключем data зі
        стору.
    </p>
    <p>В прикладі ми використовуємо отримані дані зі стору для
        відображення заголовку (data.title) та опису (data.description) у
        компоненті.
    </p>
    <p>Важливо відмітити, що ви можете використовувати хук useSelector в будь-якому компоненті, який обгортається компонентою <Provider> з
        react-redux. Цей хук автоматично підписує компонент на зміни стану стору, тому компонент буде оновлюватись, коли дані змінюються у сторі
        Redux
    </p>
    <h2>createSelector()</h2>
    <p>createSelector - це функція з бібліотеки redux-toolkit, яка використовується для створення мемоізованих селекторів в Redux. Вона дозволяє ефективно
        обчислювати похідні дані зі стану вашого Redux-стору, забезпечуючи кешування результатів, що покращує продуктивність додатку.
    </p> 
    <p>У Redux ви можете мати ситуації, коли вам потрібно обчислювати похідні дані зі стану, наприклад, фільтрувати, сортувати або групувати дані перед їхнім
        використанням в компоненті. Без мемоізації ці обчислення можуть повторюватися надто часто, що призводить до зайвої роботи і зниження
        продуктивності.
    </p>
    <p>У прикладі ми використовуємо два вхідних селектори -
        getUsers і getFilter - для отримання відповідних частин стану.
        Потім визначаємо функцію, яка обчислює відфільтрований список
        користувачів на основі цих даних.
    </p>
    <p>Замість прямого використання getUsers і getFilter, ви використовуєте filteredUsersSelector як селектор для отримання відфільтрованого
        списку користувачів. Селектор буде повертати результат з кешу, якщо вхідні дані не змінилися, зменшуючи непотрібні повторні обчислення.
    </p>
    <h2>Folder structure</h2>
    <p>При використанні Redux Toolkit рекомендовані структура папок та конвенції назв файлів аналогічні попередньо наведеним. Однак Redux Toolkit надає деякі
        абстракції, які спрощують налаштування Redux та організацію коду.
    </p>
    <p>Структура папок: Організуйте файли, пов'язані з Redux Toolkit, у відповідних
        папках всередині кореневої директорії вашого проекту.
    </p>
    <p>Наприклад:</p>
    <p>• features: Ця папка містить підпапки, які представляють різні функціональні можливості або домени вашого додатку. Кожна підпапка містить логіку Redux,
        пов'язану з конкретною функціональністю. <br>
        • store: Розмістіть файли налаштування Redux Toolkit у цій папці. Зазвичай вона включає створення Redux-сховища за допомогою configureStore з Redux
        Toolkit.
    </p>
    <p>Підхід на основі функціональності: Використовуйте підхід на основі функціональності всередині папки features. Кожна підпапка, що відповідає
        функціональності, може містити наступні файли:
    </p>
    <p>• Slice: Redux Toolkit використовує поняття "slices" (фрагменти), які
        поєднують визначення дій та редюсерів в одному файлі. У кожній
        підпапці функціональності повинен бути відповідний файл slice.js,
        наприклад authSlice.js або cartSlice.js. Цей файл визначає дії та
        редюсери для конкретної функціональності. <br>
        • Actions: За потреби ви можете створити окремий файл actions.js
        всередині підпапки функціональності, щоб визначити додаткові дії,
        специфічні для цієї функціональності. <br>
        • Selectors: Аналогічно, ви можете створити файл selectors.js
        всередині підпапки функціональності, щоб визначити селектори, які
        витягують та обчислюють похідний стан для цієї функціональності.
    </p>
    <p>За допомогою Redux Toolkit ідея полягає в тому, щоб кожна функціональність мала свою власну папку, використовуючи "slices" для поєднання дій та
        редюсерів. Цей підхід спрощує структуру коду та зменшує кількість шаблонного коду, які зазвичай пов'язані з Redux.
    </p>
    <h2>Робота з асинхронними операціями</h2>
    <p>HTTP-запити це асинхронні операції, які представлені промісами, тому їх можна розбити на три складові: процес запиту (pending), успішне
        завершення запиту (fulfilled) та завершення запиту з помилкою (rejected). Цей шаблон застосуємо до будь-яких запитів читання, створення,
        видалення та оновлення.
    </p>
    <p>Основний підхід для роботи з асинхронними операціями в Redux Toolkit - це використання вбудованного у Redux Toolkit пакету Redux Thunk, який
        дозволяє вам писати асинхронні дії (actions) та обробники (reducers) в Redux.
    </p>
    <p>Створіть файл для опису дій та обробників. Наприклад, userSlice.js</p>
    <p>В редьюсері описуємо логіку завантаження та обробки помилок</p>
    <p>Додамо Операцію. Ця функція використовує dispatch для відправки різних дій Redux,
        які відповідають різним етапам асинхронного запиту.
    </p>
    <p>• Спочатку, викликається dispatch(getUserStart()), що ініціює стан завантаження (loading) перед початком асинхронного запиту. <br>
        • Потім, виконується сам асинхронний запит fetchUser(), який очікує дані користувача. <br>
        • Якщо запит успішний, то викликається dispatch(getUserSuccess(user)), де user - отримані дані про користувача. Це оновлює стан з
        отриманими даними та очищує будь-які помилки. <br>
        • У разі помилки під час виконання запиту, викликається dispatch(getUserFailure(error.message)), де error.message - повідомлення про
        помилку. Це оновлює стан з повідомленням про помилку та очищує отримані дані.
    </p>
    <p>Створіть ваш store з використанням configureStore з Redux Toolkit</p>
    <p>Використовуйте ваші дії та обробники в компонентах React:</p>
    <p>В прикладі вище, коли натискається кнопка "Fetch User", викликається асинхронна дія
        fetchUserAsync, яка виконує запит до сервера за даними користувача. Під час виконання
        запиту встановлюється прапорець loading, а після успішного отримання даних користувача
        - змінюється стан user. У разі помилки - стан error.
    </p>
    <h2>createAsyncThank</h2>
    <p>createAsyncThunk - це функція з Redux Toolkit, яка дозволяє створювати асинхронні
        дії (async actions) швидко та зручно. Вона автоматично генерує три дії для обробки
        асинхронних операцій: pending, fulfilled та rejected. Це спрощує обробку
        асинхронних запитів та керування станом додатку.
    </p>
    <p>У прикладі createAsyncThunk генерує асинхронну дію fetchUserAsync. Вона
        автоматично створює три додаткові дії: fetchUserAsync.pending,
        fetchUserAsync.fulfilled та fetchUserAsync.rejected.
    </p>
    <p>• pending - дія, яка спрацьовує перед початком асинхронного запиту. <br>
        • fulfilled - дія, яка спрацьовує при успішному завершенні асинхронного запиту. <br>
        • rejected - дія, яка спрацьовує в разі помилки при виконанні асинхронного запиту.
    </p>
    <p>У розділі extraReducers ми визначаємо, як обробляти ці дії та змінювати стан
        додатку. Наприклад, коли спрацьовує pending, ми встановлюємо значення loading в
        true. Коли спрацьовує fulfilled, ми оновлюємо loading на false, зберігаємо
        отримані дані в data і встановлюємо error в null. Коли спрацьовує rejected, ми
        встановлюємо значення loading в false, очищуємо data і зберігаємо повідомлення
        про помилку у error.
    </p>
    <p>Потім ви можете використовувати fetchUserAsync у своєму компоненті React:</p>
    <p>У компоненті ми використовуємо значення loading, error та user зі стану Redux за
        допомогою useSelector. При кліці на кнопку "Fetch User" ми викликаємо
        fetchUserAsync через dispatch. <br>
        createAsyncThunk спрощує обробку асинхронних операцій в Redux, використовуючи
        стандартні дії та автоматично генеруючи додаткові дії для вас. Ви можете легко
        розширювати його функціонал та використовувати його для будь-яких асинхронних
        операцій у своєму додатку.
    </p>
</body>
</html>